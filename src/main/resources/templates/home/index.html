<!DOCTYPE html>
<html
        lang="en"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:th="http://www.thymeleaf.org"
>
<th:block th:include="~{common/head}"/>
<body id="index-body">
<th:block th:include="~{common/header}"/>
<main>
    <th:block th:unless="${session.username == null}">
        <div class="text-center mb-3">
            <h4 class="text-white mt-2">Welcome, [[${session.username}]]</h4>
        </div>
    </th:block>
    <div class="container bg-light">
        <table id="foods-diary-table" class="table table-striped table-hover table-sm">
            <thead>
            <tr>
                <th style="width: 60%">Food</th>
                <th style="width: 15%">Amount</th>
                <th style="width: 15%">Calories</th>
                <th style="width: 10%">Price</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>Apple</td>
                <td>500g</td>
                <td>212</td>
                <td>2.99 lv</td>
            </tr>
            <tr>
                <td>Apple</td>
                <td>500g</td>
                <td>212</td>
                <td>2.99 lv</td>
            </tr>
            <tr>
                <td>Apple</td>
                <td>500g</td>
                <td>212</td>
                <td>2.99 lv</td>
            </tr>
            <tr>
                <td>Apple</td>
                <td>500g</td>
                <td>212</td>
                <td>2.99 lv</td>
            </tr>
            </tbody>
        </table>
        <div id="percentage-bars" class="container row">
            <div class="col-sm nutrients-progress-bars">
                <span>Calories</span>
                <div class="progress position-relative mt-sm-2">
                    <div class="progress-bar bg-warning text-dark" role="progressbar" style="width: 25%;"
                         aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"><small
                            class="justify-content-center d-flex position-absolute w-100">500 kcal / 2000 kcal
                        (25%)</small></div>
                </div>
                <span>Protein</span>
                <div class="progress position-relative  mt-sm-2">
                    <div class="progress-bar bg-success text-dark" role="progressbar" style="width: 75%;"
                         aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"><small
                            class="justify-content-center d-flex position-absolute w-100">75 g / 100 g (75%)</small>
                    </div>
                </div>
                <span>Carbs</span>
                <div class="progress position-relative  mt-sm-2">
                    <div class="progress-bar bg-info text-dark" role="progressbar" style="width: 100%;"
                         aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><small
                            class="justify-content-center d-flex position-absolute w-100">100 g / 100 g (100%)</small>
                    </div>
                </div>
                <span>Fat</span>
                <div id="progress-bar-fat" class="progress position-relative  mt-sm-2">
                    <div class="progress-bar bg-danger text-dark" role="progressbar" style="width: 45%;"
                         aria-valuenow="45" aria-valuemin="0" aria-valuemax="100"><small
                            class="justify-content-center d-flex position-absolute w-100">44.6 g / 100 g (45%)</small>
                    </div>
                </div>
            </div>
            <div class="col-sm">
                <div id="calories-breakdown-chart"></div>
            </div>
            <div class="col-sm">
                <div id="price-breakdown-chart"></div>
            </div>
        </div>
</main>

<th:block th:include="~{common/footer}"/>
</body>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
    google.charts.load("current", {packages: ["corechart"]});
    google.charts.setOnLoadCallback(drawCaloriesChart);
    google.charts.setOnLoadCallback(drawPriceChart);

    var options = {};

    function drawCaloriesChart() {
        var data = google.visualization.arrayToDataTable([
            ['Macronutrients', 'Calories'],
            ['Protein', 1000],
            ['Carbs', 2200],
            ['Fat', 900]
        ]);

        var chart = new google.visualization.PieChart(document.getElementById('calories-breakdown-chart'));
        chart.draw(data, options);
    }

    function drawPriceChart() {
        var data = google.visualization.arrayToDataTable([
            ['Food', 'Price'],
            ['Bread', 1.20],
            ['Banana', 2.49],
            ['Cucumber', 2],
            ['Tomato', 2.11],
            ['Skyr', 3.00],
            ['Chicken Breast', 10.50]
        ]);

        var chart = new google.visualization.PieChart(document.getElementById('price-breakdown-chart'));
        chart.draw(data, options);
    }

</script>
</html>